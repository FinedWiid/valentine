<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Valentine</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,500;0,600;1,500&family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      overflow-x: hidden;
      position: relative;
      background: linear-gradient(165deg, #fff0f3 0%, #ffe4ec 35%, #ffd6e0 70%, #ffc9d9 100%);
      font-family: "Nunito", sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px;
    }

    .hearts-bg {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      overflow: hidden;
    }

    .heart-rain {
      position: absolute;
      top: -60px;
      font-size: 22px;
      animation: fall linear forwards;
      filter: drop-shadow(0 0 6px rgba(255, 105, 135, 0.35));
    }

    .heart-rain:nth-child(3n) { animation-name: fallDrift; }
    .heart-rain:nth-child(5n) { animation-name: fallSlow; }

    @keyframes fall {
      to {
        transform: translateY(100vh) rotate(180deg);
        opacity: 0.3;
      }
    }
    @keyframes fallDrift {
      to {
        transform: translate(80px, 100vh) rotate(360deg);
        opacity: 0.4;
      }
    }
    @keyframes fallSlow {
      to {
        transform: translate(-40px, 100vh) rotate(90deg);
        opacity: 0.5;
      }
    }

    .card {
      position: relative;
      z-index: 1;
      max-width: 420px;
      width: 100%;
      background: rgba(255, 255, 255, 0.85);
      backdrop-filter: blur(12px);
      border-radius: 28px;
      padding: 48px 40px;
      box-shadow:
        0 25px 50px -12px rgba(190, 70, 100, 0.2),
        0 0 0 1px rgba(255, 255, 255, 0.8) inset,
        0 4px 24px rgba(255, 182, 193, 0.35);
      text-align: center;
    }

    h1 {
      font-family: "Cormorant Garamond", serif;
      font-size: clamp(28px, 5vw, 38px);
      font-weight: 600;
      color: #b83a5c;
      margin: 0 0 8px;
      letter-spacing: 0.02em;
      line-height: 1.3;
    }

    .sub {
      font-size: 15px;
      color: #c45c7a;
      margin-bottom: 28px;
      font-weight: 600;
    }

    .img-wrap {
      margin: 0 auto 28px;
      width: 200px;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 12px 32px rgba(180, 80, 100, 0.25);
    }

    .img-wrap img {
      display: block;
      width: 100%;
      height: auto;
      vertical-align: middle;
    }

    .buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 14px;
      justify-content: center;
      align-items: center;
      margin-top: 8px;
    }

    button {
      min-width: 120px;
      height: 56px;
      padding: 0 24px;
      font-family: "Nunito", sans-serif;
      font-size: 17px;
      font-weight: 700;
      border: none;
      border-radius: 16px;
      cursor: pointer;
      transition: transform 0.15s ease, box-shadow 0.2s ease;
      position: relative;
    }

    button:hover {
      transform: translateY(-2px);
    }

    button:active {
      transform: translateY(0);
    }

    .yesBtn {
      background: linear-gradient(145deg, #e84d6d 0%, #d63d5c 100%);
      color: white;
      box-shadow: 0 8px 24px rgba(232, 77, 109, 0.4);
    }

    .yesBtn:hover {
      box-shadow: 0 12px 32px rgba(232, 77, 109, 0.5);
    }

    #noBtn {
      background: linear-gradient(145deg, #8e8e8e 0%, #6b6b6b 100%);
      color: rgba(255, 255, 255, 0.95);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
      transition: transform 0.15s ease, box-shadow 0.2s ease, left 0.45s ease-out, top 0.45s ease-out;
    }

    .celebration {
      position: fixed;
      inset: 0;
      z-index: 10;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(255, 240, 243, 0.9);
      backdrop-filter: blur(8px);
    }

    .celebration.active {
      display: flex;
    }

    .celebration-content {
      text-align: center;
      padding: 40px;
    }

    .celebration-content h2 {
      font-family: "Cormorant Garamond", serif;
      font-size: clamp(32px, 6vw, 48px);
      color: #b83a5c;
      margin: 0 0 12px;
    }

    .celebration-content p {
      font-size: 18px;
      color: #c45c7a;
      margin: 0;
    }

    .celebration-hearts {
      font-size: 48px;
      margin-top: 16px;
      animation: bounce 0.6s ease infinite;
    }

    @keyframes bounce {
      50% { transform: scale(1.15); }
    }
  </style>
</head>
<body>
<div class="hearts-bg" id="heartsBg"></div>

<div class="card">
  <h1 id="mainHeading">Will you be my Valentine?</h1>
  <p class="sub" id="subHeading">Say yes and make my day üíï</p>
  <div class="img-wrap">
    <img src="https://raw.githubusercontent.com/FinedWiid/valentine/main/valentine.jpg" alt="Valentine">
  </div>
  <div class="buttons">
    <button class="yesBtn">Yes</button>
    <button id="noBtn">No</button>
  </div>
</div>

<div class="celebration" id="celebration">
  <div class="celebration-content">
    <h2>Yay!!!</h2>
    <p>You just made my heart skip a beat üíó</p>
    <div class="celebration-hearts">‚ù§Ô∏è üíï üíó ‚ù§Ô∏è</div>
  </div>
</div>
<script>
(function rainHearts() {
  const container = document.getElementById("heartsBg");
  const hearts = ["‚ù§", "‚ô•", "üíï", "üíó"];
  const colors = ["#e84d6d", "#d63d5c", "#c45c7a", "#e8a0b0"];
  let heartId = 0;

  function createHeart() {
    const el = document.createElement("span");
    el.className = "heart-rain";
    el.textContent = hearts[Math.floor(Math.random() * hearts.length)];
    el.style.left = Math.random() * 100 + "%";
    el.style.color = colors[Math.floor(Math.random() * colors.length)];
    el.style.fontSize = (16 + Math.random() * 18) + "px";
    el.style.opacity = 0.35 + Math.random() * 0.4;
    el.style.animationDuration = (5 + Math.random() * 8) + "s";
    el.style.animationDelay = Math.random() * 3 + "s";
    container.appendChild(el);
    setTimeout(() => { el.remove(); }, 15000);
  }

  setInterval(createHeart, 350);
  for (let i = 0; i < 15; i++) setTimeout(createHeart, i * 200);
})();

let yesSize = 1;
let noSize = 1;
let messageIndex = 0;
const noBtn = document.getElementById("noBtn");
const buttonsDiv = document.querySelector(".buttons");
const celebration = document.getElementById("celebration");
const mainHeading = document.getElementById("mainHeading");
const subHeading = document.getElementById("subHeading");

const messages = [
  { main: "Will you be my Valentine?", sub: "Say yes and make my day üíï" },
  { main: "Pretty please?", sub: "The Yes button is right there üëâ" },
  { main: "Are you sure about that?", sub: "Maybe give Yes a try? üòä" },
  { main: "Wrong button!", sub: "You meant Yes, right? üíï" },
  { main: "I'll keep asking...", sub: "Yes is the way to my heart ‚ù§Ô∏è" },
  { main: "Still no? Really?", sub: "That Yes button looks so friendly!" },
  { main: "My heart is breaking üíî", sub: "Just kidding... but press Yes? ü•∫" },
  { main: "Okay, last chance!", sub: "Yes. You know you want to. üòè" },
  { main: "Yes. Say it. Yes.", sub: "Come on, you've got this! üí™" },
  { main: "I'm not giving up on you", sub: "Neither should you on Yes üíó" },
  { main: "The Yes button misses you", sub: "It's right there. Right. There." },
  { main: "Yes = happiness. No = this.", sub: "Your move. Make it a good one. üòå" },
  { main: "Fine, I'll ask forever then", sub: "Yes would end this so nicely ‚ú®" },
  { main: "Yes. Y-E-S. Yes.", sub: "You're so close. So very close." },
  { main: "I believe in you üíï", sub: "I believe you'll press Yes. Any second now." }
];

function yesClicked() {
  celebration.classList.add("active");
}
celebration.onclick = () => celebration.classList.remove("active");

// Fixed buttons must live in body so they're not clipped by card's backdrop-filter
const FIXED_LAYER_Z = 5;

function teleport(btn) {
  if (btn.parentNode !== document.body) document.body.appendChild(btn);
  const x = Math.random() * (window.innerWidth - 120);
  const y = Math.random() * (window.innerHeight - 60);
  btn.style.position = "fixed";
  btn.style.left = x + "px";
  btn.style.top = y + "px";
  btn.style.zIndex = FIXED_LAYER_Z;
}

// No button stays inside this area (run-away + teleport). Smaller margin = more room to run in all directions.
const RUN_AREA_MARGIN = 12;

function getNoBtnBounds() {
  const rect = noBtn.getBoundingClientRect();
  return {
    minLeft: RUN_AREA_MARGIN,
    maxLeft: window.innerWidth - rect.width - RUN_AREA_MARGIN,
    minTop: RUN_AREA_MARGIN,
    maxTop: window.innerHeight - rect.height - RUN_AREA_MARGIN,
    w: rect.width,
    h: rect.height
  };
}

function clampNoToArea(left, top) {
  const b = getNoBtnBounds();
  return {
    left: Math.max(b.minLeft, Math.min(b.maxLeft, left)),
    top: Math.max(b.minTop, Math.min(b.maxTop, top))
  };
}

function teleportNoToArea() {
  if (noBtn.parentNode !== document.body) document.body.appendChild(noBtn);
  noBtn.style.zIndex = FIXED_LAYER_Z;
  const b = getNoBtnBounds();
  const maxLeft = Math.max(b.minLeft, b.maxLeft);
  const maxTop = Math.max(b.minTop, b.maxTop);
  const x = b.minLeft + Math.random() * Math.max(1, maxLeft - b.minLeft);
  const y = b.minTop + Math.random() * Math.max(1, maxTop - b.minTop);
  noBtn.style.position = "fixed";
  noBtn.style.left = x + "px";
  noBtn.style.top = y + "px";
}

let noPressedOnce = false;
// Trigger zone: same distance on all sides so it runs away whether cursor is top-left or bottom-right
const RUN_AWAY_DIST = 200;
const RUN_AWAY_STEP = 8;

document.addEventListener("mousemove", (e) => {
  if (!noPressedOnce) return;
  const rect = noBtn.getBoundingClientRect();
  const btnCenterX = rect.left + rect.width / 2;
  const btnCenterY = rect.top + rect.height / 2;
  const dx = e.clientX - btnCenterX;
  const dy = e.clientY - btnCenterY;
  const dist = Math.hypot(dx, dy);
  if (dist > 0 && dist < RUN_AWAY_DIST) {
    if (noBtn.parentNode !== document.body) document.body.appendChild(noBtn);
    noBtn.style.zIndex = FIXED_LAYER_Z;
    const nx = dx / dist;
    const ny = dy / dist;
    let newLeft = rect.left - nx * RUN_AWAY_STEP;
    let newTop = rect.top - ny * RUN_AWAY_STEP;
    const c = clampNoToArea(newLeft, newTop);
    noBtn.style.position = "fixed";
    noBtn.style.left = c.left + "px";
    noBtn.style.top = c.top + "px";
  }
});

// Use document so Yes buttons work after they're moved to body by teleport()
document.addEventListener("click", (e) => {
  if (e.target.classList.contains("yesBtn")) yesClicked();
});

noBtn.onclick = () => {
  noPressedOnce = true;

  messageIndex = (messageIndex + 1) % messages.length;
  mainHeading.textContent = messages[messageIndex].main;
  subHeading.textContent = messages[messageIndex].sub;

  // No: shrink and teleport (within same run area)
  noSize -= 0.1;
  if (noSize < 0.3) noSize = 0.3;
  noBtn.style.transform = `scale(${noSize})`;
  teleportNoToArea();

  // Yes: add one more (bigger) and teleport every Yes button
  yesSize += 0.2;
  const yesBtn = document.createElement("button");
  yesBtn.className = "yesBtn";
  yesBtn.innerText = "Yes";
  yesBtn.style.transform = `scale(${yesSize})`;
  buttonsDiv.appendChild(yesBtn);
  document.querySelectorAll(".yesBtn").forEach(teleport);
};
</script>
</body>
</html>
